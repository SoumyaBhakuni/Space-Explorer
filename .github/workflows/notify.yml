name: Notify on CI Failures

on:
  workflow_run:
    workflows: [ "CI", "CodeQL" ] # monitor existing workflows
    types:
      - completed

jobs:
  notify:
    if: ${{ failure() }}
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Notification
        uses: Ilshidur/action-discord@v2
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK }}
          message: "‚ö†Ô∏è Workflow **${{ github.workflow }}** failed on ${{ github.ref_name }} üö®"
